# Parents' and Children's Production of Disjunction {#corpus}

```{r global_options5, include=FALSE}
knitr::opts_chunk$set(fig.width=3, fig.height=3, 
                      fig.crop = F, fig.pos = "tb", fig.path='figs/',
                      echo=F, warning=F, cache=TRUE, 
                      message=F, sanitize = T)
```

```{r loadingPackages}
library(knitr)
library(kableExtra)
library(childesr)
library(tidyverse)
library(ggthemes)
library(lubridate)
library(magrittr)
library(tidyboot)
library(lme4)
library(lmerTest)
library(forcats)
library(feather)
library(binom)
library(DescTools)
library(brms)
```

```{r comments5, eval=FALSE}
# Run everything with new data from Kutay
# Add confidence intervals to plots that don't have it
# Add the details of inter-rater agreement calculations
# Run statistical tests for study 2
```

<!-- 
___________STUDY 1_____________

++ first give raw counts on: number of words per speaker_role and collection name. then do exclusions, then report again the raw counts

++ add the raw counts of utterances per speaker_role and collection name.

++ add data on adult usage

++ explicitly define how you interpreted relative frequencies

++ try to only talk about utterance types and communicative functions

___________STUDY 2_____________

++ Make sure: annotation category vs. annotation classes are clear

++ Add some statistical analyses

++ ORGANISATION: Read through it and make sure the general message is clear

++ short presentation of results for conjunction?

?? Maybe we should code for speaker certainty on whether the disjuncts hold or not? Seems like a tricky category to code though.
-->

## Introduction

This chapter presents two studies on parents and children's production of *and* and *or*. The first study investigates the frequency of *and* and *or* in parents and children's speech to answer two questions: 1. at what age do children start to produce *and* and *or*. 2. do children reach their parent's level of production for these words? and if they do at what age? The second study explores the frequency of different interpretations *and* and *or* have in child-directed speech. This study seeks to answer the following two questions: 1. What are the most frequent interpretations of *and* and *or* in child-directed speech? 2. What are reliable cues that can help children interpret and acquire the meanings of *and* and *or*?

<!--
## Frequencies in Adult Conversations

This section breifly reports the frequency of *and* \& *or* in adult speech before look at their rates in adult-child interactions.

### Method



###Results

There were 102170 instances of *and* and 15801 instance of *or*. Normalizing these frequencies by the number of words in the corpus we get a relative frequency of 35.2 *and*'s per thousand words and 5.4 *or*'s. Therefore, in adult-adult speech we find that *and* is around 6.5 times more frequent than *or*.

### Distributional Properties in Adult Speech

Does it appear more in interrogatives or declaratives?

What words does it appear with more? Modals?

-->

## Study 1: *and* and *or* in parents' and children's speech

This study investigates the production of *and* \& *or* by children and their parents in an online collection of corpora. The goal is to understand the overall frequencies of these items and investigate the developmental trends in children's productions. After describing the study methods in section \@ref(study1methods), I investigate some important properties of the corpora such as their word density for parents and children at different ages as well as the frequency of different utterance types in the speech of parents and children. I explain that function words are sensitive to the distribution of utterance types or more broadly speech acts or constructions with particular communicative functions. Therefore, it is important for developmental studies on the production of function words to investigate their frequencies within different utterance types, speech acts, or constructions with specific communicative functions. In section \@ref(study1results), I first look at the overall and monthly relative frequencies of *and* and *or* in the speech of parents and children. Then, I use utterance type as a proxy for speech acts and investigate the relative frequencies of these connectives within declaratives and questions. I summarize the main results and important conclusions of the study in section \@ref(study1discussion).

### Methods {#study1methods}

```{r importProcessedData}
wordCounts <- read_csv("connective_learning/2_processed_data/wordCounts.csv")
wordCounts_byAge <- read_csv("connective_learning/2_processed_data/wordCounts_byAge.csv")

freqTable_bySpeaker <- read.csv("connective_learning/2_processed_data/relfreq_bySpeaker.csv")

freqTable_bySpeakerSpeechAct <- read.csv("connective_learning/2_processed_data/relfreq_bySpeakerSpeechAct.csv")

cnctv_prop_bySpeechAct <- read_csv("connective_learning/2_processed_data/connective_prop_bySpeechAct.csv")

freqTable_bySpeechAct <- read.csv("connective_learning/2_processed_data/frequency_bySpeechAct.csv")

freqTable_byAge <- read.csv("connective_learning/2_processed_data/RelFreq_byAge.csv")
freqTable_byAgeSpeechAct <- read.csv("connective_learning/2_processed_data/RelFreq_byAgeSpeechAct.csv")

relFreq_bySpeaker <- read.csv("connective_learning/2_processed_data/relFreq_bySpeaker.csv")

relFerq_bySpeakerSpeechAct <- read.csv("connective_learning/2_processed_data/relFerq_bySpeakerSpeechAct.csv")

utteranceType_bySpeaker <- read_csv("connective_learning/2_processed_data/utteranceType_bySpeaker.csv")

utteranceType_byAge <- read_csv("connective_learning/2_processed_data/utteranceType_byAge.csv")

wordCounts_byCollection <- read_csv("connective_learning/2_processed_data/wordCounts_byCollection.csv")

corpus_density <- read_csv("connective_learning/2_processed_data/corpusDensity.csv")
child_density <- read_csv("connective_learning/2_processed_data/childDensity.csv")
```

```{r corpusStats}
corpora_info <- read_csv("connective_learning/1_raw_data/corpora_info.csv")

# convert the ages into years
corpora_info$target_child_age_years <-
  corpora_info$target_child_age %>% duration("days") %>% as.numeric("years")

# children's ages
Ages <- 
  corpora_info$target_child_age_years %>% unique() %>% na.omit()

# number of transcripts after age exclusion
n_transcripts <- corpora_info %>% filter(target_child_age_years < 6, target_child_age_years > 1) %>% select(transcript_id) %>% unique()

n_transcripts <- length(n_transcripts$transcript_id)

exclusions <- read_csv("connective_learning/2_processed_data/exclusions.csv")
```

For samples of parents' and children's speech, this study used the online database [childes-db R](childes-db.stanford.edu) and its associated R programming package `childesr` [@childesdb]. Childes-db is an online interface to the child language components of [TalkBank](https://talkbank.org/), namely [CHILDES](https://childes.talkbank.org/) [@macwhinney2000childes] and [PhonBank](https://phonbank.talkbank.org/).   Two collections of corpora were selected: English-North America and English-UK. All word tokens were tagged for the following information: 1. The speaker role (mother, father, child), 2. the age of the child when the word was produced, 3. the type of the utterance the word appeared in (declarative, question, imperative, other), and 4. whether the word was "and", "or", or some "other" word.
<!--
In order to be able to compare child-directed speech with adult-to-adult speech, this study also used [the Switchboard Corpus](https://catalog.ldc.upenn.edu/ldc97s62) -- a corpus of telephone conversations between 543 speakers (302 male, 241 female) from all areas of the United States. The corpus was collected using a computer system that called participants, gave them a topic for discussion, and recorded their conversation. The set of 70 topics used for discussions can be accessed on [the Switchboard Corpus documentation page](https://catalog.ldc.upenn.edu/docs/LDC97S62/). No two participants spoke togehter more than once and no participant discussed a topic more than once. It is important to keep in mind that the Switchboard Corpus differs from CHILDES in two crucial ways. First, participants in the Switchboard corpus do not know each other while CHILDES participants are family members. Second, the Switchboard corpus is made up of conversations over the phone while in CHILDES, participants can interact with each other and have physical co-presence.
-->
```{r corpusDensityPlot, fig.width=6, fig.height=2.5, fig.align="center", fig.env="figure", fig.cap="Word frequency in the North America and UK corpora of CHILDES."}
corpus_density %>%
  ggplot(aes(x=target_child_age_months, y=word_count, color=speaker_role)) +
  geom_line(stat="identity") +
  facet_grid(.~collection_name) +
  labs(x="age (monts)", y="word count") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

```{r childDensityPlot, fig.width=5, fig.height=2.5, fig.align="center", fig.env="figure", fig.cap="The number of children represented at different ages in the North America and UK corpora in CHILDES."}
child_density %>%
  ggplot(aes(x=target_child_age_months, y=child_count)) +
  geom_bar(stat="identity") +
  facet_grid(.~collection_name) +
  labs(x="age (monts)", y="Number of Children") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

#### Exclusion Criteria
First, observations (tokens) that were coded as unintelligible were excluded (N = `r format(exclusions$Unintelligible, decimal.mark=",")`). Second, observations that had missing information on children's age were excluded (N = `r format(exclusions$missing, decimal.mark=",")`). Third, observations outside the age range of 1 to 6 years were excluded (N = `r format(exclusions$age_ex, decimal.mark=",")`). This exclusion was mainly because there was not much data outside this age range. Figure \@ref(fig:ageDistPlot) shows the distribution of transcripts based on the age of the child at recording time. The mean age is shown with a red vertical line (Mean Age = `r round(mean(Ages),2)`, SD = `r round(sd(Ages),2)`). The collection contained the speech of `r exclusions$n_children` children and their parents after the exclusions. 

#### Procedure
Each token was marked for the utterance type that the token appeared in. This study grouped utterance types into four main categories: "declarative", "question", "imperative", and "other". Utterance type categorization followed the convention used in the [TalkBank manual](https://talkbank.org/manuals/CHAT.html#_Toc486414422). The utterance types are similar to sentence types (declarative, interrogative, imparative) with one exception: the category "question" consists of interrogatives as well as rising declaratives (i.e. declaratives with rising question intonation). In the transcripts, declaratives are marked with a period, questions with a question mark, and imperatives with an exclamation mark. It is important to note that  The manual also provides [terminators for special-type utterances](https://talkbank.org/manuals/CHAT.html#_Toc486414431). Among the special type utterances, this study included the following in the category "questions": trailing off of a question, question with exclamation, interruption of a question, and self-interrupted question. The category imperatives also included "emphatic imperatives". The rest of the special type utterances such as "interruptions" and "trailing off" were included in the category "other".     

```{r ageDistPlot, fig.asp=0.5, fig.width=5, fig.height=3, fig.pos="center", fig.cap="Distribution of children's ages at recording times. Mean age is shown using a red vertical line."}
  par(family = "Times")
  hist(Ages, breaks = 50) 
  abline(v=mean(Ages),col="red", xlim=c(0,10))
  axis(side=1, at=seq(0,15, 1), labels=seq(0,15, 1))
```

### Properties of the CHILDES Corpora

```{r wordCount}
count_table <-
  wordCounts %>%
  select(-X1) %>%
  spread(word, counts) %>%
  mutate(total = and + or + other) %>%
  select(-other)

total_words <- sum(count_table$total)
```

In this section, I report some results on the distribution of words and utterances among the speakers in our collection of corpora. The collection contained `r format(total_words, decimal.mark = ",")` words. Table (\@ref(tab:countTable)) shows the total number of *and*'s, *or*'s, and words in the speech of children, fathers, and mothers. The collection contains  `r round(count_table$total[2]/count_table$total[1],1)` times more words for mothers compared to fathers and `r round(count_table$total[2]/count_table$total[3],1)` more words for mothers compared to children. Therefore, the collection is a better representative of the mother-child interactions than father-child interactions. Compared to *or*, the word *and* is `r round(count_table$and[2]/count_table$or[2],1)` times more likely in the speech of mothers, `r round(count_table$and[1]/count_table$or[1],1)` times more likely in the speech of fathers, and `r round(count_table$and[3]/count_table$or[3],1)` times more likely in the speech of children. Overall, *and* is `r round(sum(count_table$and)/sum(count_table$or),2)` times more liklely than *or* in this collection which is close to the rate reported by @morris2008logically. He extracted 5,994 instances of *and* and 465 instances of *or* and found that overall, *and* was 12.89 times more frequent than *or* in child-parent interactions.

```{r countTable}
kable(count_table, caption = "Number of and's, or's, and the total number of words in the speech of children and their parents in English-North America and English-UK collections after exclusions.", format.args = list(big.mark = ','), col.names = c("Speaker Role", "and", "or", "total"))
```

Figure \@ref(fig:wordsByAge) shows the number of words spoken by parents and children at each month of the child's development. The words in the collection are not distributed uniformly and there is a high concentration of data between the ages of 20 and 40 months (around 2 to 3 years of age). There is also a high concentration around 60 months (5 years of age). The speech of fathers shows a relatively low word-count across all ages. Therefore, in our analyses we should be more cautious in drawing conclusions on the speech of fathers generally, and the speech of mothers and children after age 5.

```{r wordsByAge, fig.env="figure", fig.align="center", fig.width=6, fig.height=2.5, fig.cap="The number of words in the corpora for parents and children in each month of children's development."}
wordCounts_byAge %>%
  ggplot(aes(x=target_child_age_months, y=count, color=speaker_role)) +
  geom_line(size=0.8) +
  labs(x="age (months)", y="number of words") +
  scale_x_continuous(breaks=seq(12,72, 12)) +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

The distribution of function words is sensitive to the type of utterance or more broadly the type of speech act produced by speakers. For example, question particles may appear more frequently in questions than other types of utterance. Therefore, it is important to check the distribution of speech acts in corpora when studying different function words. Since it is hard to classify and quantify speech acts automatically, here I use utterance type as a proxy for speech acts. I investigate the distribution of declaratives, questions, and imperatives in our collection of corpora on child-parent interactions. Figure \@ref(fig:totalUtteranceTypePlot) shows the distribution of different utterance types in the speech of parents and children. Overall, most utterances are either declaratives or questions, and there are more declaratives than questions in our collection. While mothers and fathers show similar proportions of declaratives and questions in their speech, children produce a lower proportion of questions and higher proportion of declaratives than their parents.

```{r totalUtteranceTypePlot, fig.align="center", fig.width=4, fig.height=2, fig.cap="The proportion of declaratives and questions in children's and parents' utterances."}
utteranceType_bySpeaker %>%
#  filter(type == "declarative" | type == "question") %>%
  ggplot(aes(x=speaker_role, y=utteranceType_ppc, fill=speech_act)) + 
  theme(text = element_text(size=12)) +
  geom_bar(stat="identity") + labs(x="Speaker Role", y="Proportion (%)") + 
  theme_few() + theme(text = element_text(size = 11, family="Times"))
```

Figure \@ref(fig:utteranceTypeByAgePlot) shows the developmental trend of declaratives and questions between the ages of one and six. Children start with only producing declaratives and add non-declarative utterances to their repertoire gradually until they get closer to the parents' rate around the age six. They also start with very few questions and increase the number of questions they ask gradually. It is important to note that the rate of declarative and questions in children's speech does not reach the adult rate. These two figures show that parent-child interactions are asymmetric. Parents ask more questions and children produce more declaratives. This asymmetry also interacts with age: the speech of younger children has a higher proportion of declaratives than older children.

```{r utteranceTypeByAgePlot, fig.width=5.5, fig.height=2.5, fig.cap = "Proportion of declaratives to questions in child-parent interactions by age."}
utteranceType_byAge %>%
  filter(speech_act == "declarative" | speech_act == "question") %>%
  ggplot(aes(x=target_child_age_months, y=utteranceType_ppc, shape=speaker_role, color = speaker_role)) +
  geom_point(aes(), size=0.6) + 
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=1) +  
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  labs(x = "age (months)", y="Proportion (%)") +
  scale_x_continuous(breaks=seq(12,72, 12)) +
  facet_grid(.~speech_act) + 
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

The frequency of function words such as *and* and *or* may be affected by such conversational asymmetries if they are more likely to appear in some utterance types than others. Figure \@ref(fig:CnctPropbySpeechAct) shows the proportion of *and*'s and *or*'s that appear in different utterance types in parents' and children's speech. In parents' speech, *and* appears more often in declaratives (around 60% in declaratives and 20% in questions). On the other hand, *or* appears  more often in questions than declaratives, although this difference is small in mothers. In children's speech, both *and* and *or* appear most often in declaratives. However, children have a higher proportion of *or* in questions than *and* in questions. 

The differences in the distribution of utterance types can affect our interpretation of the corpus data on function words such as *and* and *or* in three ways. First, since the collection contains more declaratives than questions, it may reflect the frequency and diversity of function words like *and* that appear in declaratives better. Second, since children produce more declaratives and fewer questions than parents, we may underestimate children's knowledge of function words like *or* that are frequent in questions. Third, given that the percentage of questions in the speech of children increases as they get older, function words like *or* that are more likely to appear in questions may appear infrequent in the early stages and more frequent in the later stages of children's development. In other words, function words like *or* that are common in questions may show a seeming delay in production which is possibly due to the development of questions in children's speech. Therefore, in studying children's productions of function words, it is important to look at their relative frequencies in different utterance types as well as the overall trends. This is the approach we pursue in the next section.

```{r CnctPropbySpeechAct, fig.env="figure", fig.align="center", fig.width= 6, fig.height=3, fig.cap="The proportion of and/or in different utterance types in the speech of parents and children."}
cnctv_prop_bySpeechAct %>%
  filter(word != "other") %>%
  ggplot(aes(x=speech_act, y=connective_pct, fill=speech_act)) + 
  geom_bar(stat="identity") + 
  facet_grid(word~speaker_role) + 
  theme_few() +
  geom_errorbar(aes(ymin=lower_pct, ymax=upper_pct), width=0.1) + 
  labs(x="", y="Proportion (%)") + 
#  scale_fill_manual(values = c("seagreen3","seagreen", "darkblue", "gray")) + 
  theme(axis.text.x = element_text(angle=45, hjust=1, vjust=1), text = element_text(size=11, family="Times")) +
  guides(fill=FALSE)
```

<!--
### Properties of the Switchboard Corpus
-->
### Results {#study1results}

First, I consider the overall distribution of *and* and *or* in our corpora and then look closer at their distributions in different utterance types. Figure \@ref(fig:freqTableBySpeakerPlot) shows the frequency of *and* and *or* relative to the total number of words produced by each speaker (i.e. fathers, mothers, and children). The y-axes show relative frequency per thousand words. It is also important to note that the y-axes show different ranges of values for *and* vs. *or*. This is due to the large difference between the relative frequencies of these connectives. Overall, *and* occurs around 15 times per thousand words but *or* only occurs 3 times per 2000 words in the speech of parents and around 1 time every 2000 words in the speech of children. Comparing the relative frequency of the connectives in parents' and children's speech, we can see that overall, children and parents produce similar rates of *and* in their interactions. However, children produce fewer *or*'s than their parents. 

```{r freqTableBySpeakerPlot, fig.env="figure", fig.align="center", fig.width=3, fig.height=2.5, fig.cap="The relative frequency of and/or in the speech of fathers, mothers, and children. 95\\% binomial proportion confidence intervals calculated using Agresti-Coull 's approximate method."}
freqTable_bySpeaker %>%
  filter(word != "other") %>%
  ggplot(aes(x=speaker_role, y=ppt, fill=speaker_role)) + 
  geom_bar(stat="identity", width = 0.7) + 
  facet_grid(word~., scales = "free_y") + theme_few() +
  geom_errorbar(aes(ymin = ppt_lower, ymax=ppt_upper), width=0.2) +
  labs(x="", y="Relative Frequency (per thaousand)") + 
  scale_fill_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  guides(fill=FALSE) + 
  theme(text = element_text(size=11, family="Times"))
```

Next we look at the relative frequencies of *and* and *or* in parents and children's speech during the course of children's development. Figure \@ref(fig:agePlot) shows the relative frequencies of *and* and *or* in parents' and children's speech between 12 and 72 months  (1-6 years). Production of *and* in parents' speech seems to be relatively stable and somewhere between 10 to 20 *and*'s per thousand words over the course of children's development. For children, they start producing *and* between 12 and 24 months, and show a sharp increase in their production until they reach the parent level between 30 to 36 months of age. Children stay close to the parents' production level between 36 and 72 months, possibly surpassing them a bit at 60 months -- although as stated in the previous section, we should be cautious about patterns after 60 months due to the small amount of data in this period. For *or*, parents produce between 1 to 2 *or*'s every thousand words and mothers show a slight increase in their productions between 12 to 36 months. Children start producing *or* between 18 to 30 months of age. They show a steady increase in their productions of *or* until they get close to 1 *or* per thousand words at 48 months (4 years) and  stay at that level until 72 months (6 years). 

Children's productions of *and* and *or* show two main differences. First, the onset of *or* productions is later than *and* productions. Children start producing *and* around 1 to 1.5 years old while *or* productions start around 6 months later. Second, children's *and* production shows a steep rise and reaches the parent level of production at three-years old. For *or*, however, the rise in children's production level does not reach the parent level even though it seems to reach a constant level between the ages of 4 and 6 years. Not reaching the parent level of *or* production does not necessarily mean that children's understanding of *or* has not fully developed yet. It can also be due to the nature of parent-child interactions. For example, since parents ask more questions than children and *or* appears frequently in questions, parents may have a higher frequency of *or*. There are two ways of controlling for this possibility. One is to research children's speech to peers. Unfortunately such a large database of children's speech to peers is not currently available for such an analysis. Alternatively, we can look at the relative frequencies and developmental trends within utterance types such as declaratives and questions to see if we spot different developmental trends. This is what I pursue next.

```{r agePlot, fig.env="figure", fig.align="center", fig.width=4.5, fig.height=3.5, fig.cap="The monthly relative frequency of and/or in parents and children's speech between the 12 and 72 monts (1-6 years)."}
freqTable_byAge %>%
  filter(word!="other") %>%
  ggplot(aes(target_child_age_months, ppt, shape = speaker_role, color=speaker_role)) +
  geom_point(aes(), size=0.6) +
  facet_grid(word~., scales="free_y") +
#  scale_y_continuous(limits = c(0, 20)) +
  scale_x_continuous(breaks=seq(12,72, 6)) +
  labs(x = "Age (months)", y="relative frequency (per thousand words)") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=1) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() + guides(shape=FALSE) +
  theme(text = element_text(size=11, family = "Times"))
```

Figure \@ref(fig:freqTablebySpeechAct) shows the relative frequency of *and* and *or* in declaratives, questions, and imperatives. *and* has the highest relative frequency in declaratives while *or* has the highest relative frequency in questions. Figure \@ref(fig:ageSpeechActPlot) shows the developmental trends of the relative frequencies of *and* and *or* in questions and declaratives. Comparing *and* in declaratives and questions, we see that the onset of *and* productions are slightly delayed for questions but in both declaratives and questions, *and* productions reach the parent level around 36 months (3 years). For *or*, we see a similar delay in questions compared to declaratives. Children start producing *or* in declaratives at around 18 months but they start producing *or* in questions at 24 months. Production of *or* increases in both declaratives and questions until it seems to reach a constant rate in declaratives between 48 and 72 months. The relative frequency of *or* in questions continues to rise until 60 months. Comparing figures \@ref(fig:agePlot) and \@ref(fig:ageSpeechActPlot), we see that children are closer to the adult rate of production in declaratives than questions. The large difference between parents and children's production of *or* in figure \@ref(fig:agePlot) may partly be due to the development of *or* in questions. Overall the results show that children have a substantial increase in their productions of *and* and *or* between 1.5 to 4 years of age. Therefore, it is reasonable to expect that early mappings for the meaning and usage of these words are developed in this age range. 

```{r freqTablebySpeechAct, fig.align="center", fig.width=5, fig.height=3, fig.cap="Relative frequency of and/or in declaratives, imperatives, and interrogatives for parents and children "}
freqTable_bySpeakerSpeechAct %>%
  filter(word != "other", speech_act!="other") %>%
  ggplot(aes(x=speech_act, y=ppt, fill=speaker_role)) + 
  geom_bar(stat="identity") + 
  facet_grid(word~speaker_role, scales = "free_y") + theme_few() +
  geom_errorbar(aes(ymin=lower_ppt, ymax=upper_ppt), width=0.2) +
  labs(x="", y="relative frequency (pre thousand)") + 
  scale_fill_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme(axis.text.x = element_text(angle=45, hjust=1, vjust=1), text = element_text(size=11, family="Times")) +
  guides(fill=FALSE)
```

```{r ageSpeechActPlot, fig.env="figure", fig.align="center", fig.width=6, fig.height=4, fig.cap="Relative frequency of and/or in the speech of parents and childern between the child age of one and six years."}
freqTable_byAgeSpeechAct %>%
  filter(word!="other", speech_act!="other", speech_act!="imperative") %>%
  ggplot(aes(target_child_age_months, ppt, shape = speaker_role, color=speaker_role)) +
  geom_point(aes(), size=0.6) +
  facet_grid(word~speech_act, scales="free_y") +
#  scale_y_continuous(limits = c(0, 20)) +
  scale_x_continuous(breaks=seq(12,72, 6)) +
  labs(x = "age (months)", y="relative frequency (per thousand words)") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=1) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
#  guides(shape=FALSE, color=FALSE)
```

### Discussion {#study1discussion}

The goal of this study was to explore the frequency of *and* and *or* in parents and children's speech. The study found three differences. First, it found a difference between the overall frequency of *and* and *or* in both parents and children. *and* was about 10 times more frequent than *or* in the speech of parents and 30 times more liklely in the speech of children. Second, the study found a difference between parents' and children's productions of *or*. Relative to the total number of words spoken by parents and children between the ages of 1 and 6 years, both children and parents produce on average 15 *and*'s every 1000 words. Therefore, children match parents' rate of *and* production overall. This is not the case for *or* as parents produce 3 *or*'s every 2000 words and children only 1 every 2000 words. Third, the study found a developmental difference between *and* and *or* as well. The study found that the onset of production is earlier for *and* than *or*. Looking at the monthly relative frequencies of *and* and *or* in the speech of parents and children, the study also found that children reach the parents' level of production for *and* at age 3 while *or* does not reach the parents' level even at age 6. 

What causes these production differences? The first difference -- that *and* is far more frequent than *or* -- is not surprising or limited to child-directed speech. *and* is useful in a large set of contexts from conjoining elements of a sentence to connecting discourse elements or even holding the floor and delaying a conversational turn. In comparison, *or* seems to have a more limited usage. The second and the third differences -- namely that children produce fewer *or*'s than parents, and that they produce *and* and reach their parents rate earlier than *or* -- can be due to three factors. First, production of *and* develops and reaches the parents' rate earlier possibly because it is much more frequent than *or* in children's input. Previous research suggests that within the same syntactic category, words with higher frequency in child-directed speech are acquired earlier [@goodman2008does]. The conjunction word *and* is at least 10 times more likely than *or* so earlier acquisition of *and* is consistent with the effect of frequency on age of acquisition. Second, research in concept attainment has suggested that the concept of conjunction is easier to conjure and possibly acquire than the concept of disjunction. In experiments that participants are asked to detect a pattern in the classification of cards, participants can detect a conjunctive classification pattern faster than a disjunctive one (@neisser1962hierarchies). Therefore, it is possible that children learn the meaning of *and* faster and start to produce it earlier but they need more time to figure out the meaning and usage of *or*.

A third possibility is that the developmental difference between *and* and *or* is mainly due to the asymmetric nature of parent-child interactions and the utterance types that each role in this interaction requires. For example, this study found that parents ask more questions from children than children from parents. It also found that *or* is much more frequent in questions than *and* is. Therefore, parent-child interaction provides more opportunities for parents to use *or* than children. In the next study we will discuss several constructions and communicative functions that are also more appropriate for the role of parents. For example, *or* is often used to ask what someone else wants like "do you want apple juice or orange juice?" or for asking someone to clarify what they said such as "did you mean ball or bowl?". Both of these constructions are more likely to be produced by a parent than a child. *or* is also used to introduce examples or provide definitions such as "an animal is like a rabbits or a lion or a sheep". It is very unlikely that children would use such constructions to define terms for parents! Furthermore, such constructions also show their own developmental trends. For example, the study found that children start with almost entirely producing declaratives and increase their questions until at age 4 to 6, about 10% of their utterances are questions. Therefore, children's ability to produce *or* in a question is subject to the development of questions themselves. More generally, the developmental difference between *and* and *or* may also be due to a difference in the development of other factors that production of *and* and *or* rely on such as constructions. In future research, it is important to understand to what extend each of these potential causes -- frequency, conceptual complexity, and the development of other factors such as utterance type or constructions with specific communicative functions --  contribute to the developmental differences in the production of conjunction and disjunction. 

## Study 2: Interpretations of *and* and *or* in child-directed speech

Previous study reported on the frequencies of *and* and *or* in parents and children's speech production. To help us better understand children's linguistic input, this study offers a close examination of the interpretations that *and* and *or* have in child-directed speech. It helps us better understand the available input to children's learning mechanisms. A similar study was conducted by @morris2008logically, who reported the most common interpretation of *and* is conjunction and *or* exclusive disjunction. In this exploratory study, annotators judged the interpretation of *and* and *or* and coded them for for several linguistic and conceptual cues. The study had two main goals. First, to replicate the finding of @morris2008logically and second, to identify any cues in children's input that might help them learn the interpretations, and ultimately the meaning, of *and* and *or*.

### Methods

```{r importAnnotations}
# Import annotation data
connective_annotations <- read.csv("connective_learning/3_providence_annotations/providence_merged.csv")

# calculate the ages of children at the time of recording in years
connective_annotations$age_years <- interval(mdy(connective_annotations$b_date), mdy(connective_annotations$r_date))/years(1)

# record the age in months
connective_annotations$age_months <- floor(connective_annotations$age_years * 12)

# Recode interpretation
connective_annotations$connective_meaning %<>% recode(`XNOR` = "IFF", `NPQ`="NAB")
# Recode intonation levels
connective_annotations$intonation %<>% recode(`0` = "flat", `1` = "rise", `2`="rise-fall")
# Recode Answer level "no answer"
connective_annotations$answer %<>% recode(`0` = "No Answer")

#Make speech acts and utterance type categories case insensitive
connective_annotations$speech_act %<>% tolower()
connective_annotations$utterance_type %<>% tolower()
connective_annotations$speech_act %<>% tolower()

# store disjunctions separetely
disjunctions <- connective_annotations %>% filter(annotation=="OR")
conjunctions <- connective_annotations %>% filter(annotation=="AND")

# the number of *and* and *or* examples annotated
total_annotaitons<-
connective_annotations %>%
  group_by(annotation) %>%
  summarize(counts=n())
```

This study used the [the Providence corpus](https://phonbank.talkbank.org/browser/index.php?url=Eng-NA/Providence/) [@demuth2006word] available via the [PhonBank](https://phonbank.talkbank.org) section of [the TalkBank archive](https://talkbank.org/). The corpus was chosen because of its relatively dense data on child-directed speech as well as the availability of audio and video recordings that would allow annotators access to the context of the utterance. The corpus was collected between 2002 and 2005 in Providence, Rhode Island. Table \@ref(tab:providence)  reports the name, age range, and the number of recording sessions for the participants in the study. All children were monolingual English speakers and were followed from around age 1 to 4 years. Based on Study 1, this is the age range when children develop their early understanding or mappings for the meanings of *and* and *or*. The corpus contains roughly biweekly hour-long recordings of spontaneous parent-child interactions, with most recordings being of mother-child interactions. The corpus consist of a total of 364 hours of speech.

|Name	| Age Range |	Sessions |
|:-----:|:-----:|:----------:|
|Alex|1;04.28-3;05.16 |51|
|Ethan|0;11.04-2;11.01 |50|
|Lily|1;01.02-4;00.02|80|
|Naima|0;11.27-3;10.10|88|
|Violet|1;02.00-3;11.24|51|
|William|1;04.12-3;04.18|44|
Table: (\#tab:providence) Information on the participants in the Providence Corpus. Ethan was diagnosed with Asperger's syndrome and therefore was excluded from this study.

####Exclusion Criteria 
I excluded data from Ethan since he was diagnosed with Asperger's Syndrome at age 5. I also excluded all examples found in conversations over the phone, adult-adult conversations, or utterances heard from TV or radio. Such cases did not count as child-directed speech. I excluded proper names and fixed forms such as "Bread and Circus" (name of a local place) or "trick-or-treat" from the set of examples to be annotated. The rationale here was that such forms could be learned and understood with no actual understanding of the connective meaning. I counted multiple instances of *or* and *and* within the same disjunction/conjunction as one instance. The reason is that, in a coordinated structure, the additional occurrences of a connective typically did not alter the annotation categories, most importantly the interpretation of the coordination. For example, there is almost no difference between "cat, dog, and elephant" versus "cat and dog and elephant" in interpretation. In short, I focussed on the coordinated construction as a unit rather than on every separate instance of *and* and *or*. Instances of more than two connectives in a coordination were rare in the sample.

####Procedure 
All utterances containing *and* and *or* were extracted using [the CLAN software](http://alpha.talkbank.org/clan/) and automatically tagged for the following: (1). the name of the child; (2). the transcript address; (3). the speaker of the utterance (father, mother, or child); (4). the child's birth date, and (5). the recording date. Since the focus of the study was mainly on disjunction, we annotated instances of *or* in all the child-directed speech from the earliest examples to the latest ones found. Given that the corpus contained more than 10 times the number of *and*s than *or*s, I randomly sampled 1000 examples of *and* to match 1000 examples of *or*. Here I report the results on `r nrow(conjunctions)` examples of *and* and `r nrow(disjunctions)` examples of *or*.

#### Annotation Categories

Every extracted instance of *and* and *or* was manually annotated for 7 categories: 1. Connective Interpretation 2. Intonation Type 3. Utterance Type  4. Syntactic Level 5. Conceptual Consistency 6. Communicative Function and 7. Answer Type. In what follows, I explain how each annotation category was defined in detail and provide some prototypical examples of the category.

##### Connective Interpretation 
This category is the dependent variable of the study. Annotators listened to coordinations such as "A or B" and "A and B", and decided the intended interpretation of the connective with respect to the truth of A and B. We used the sixteen binary connectives shown in Figure \@ref(fig:logicalConnectives) as the space of possible connective interpretations. Annotators were asked to consider the two propositions raised by the coordinated construction, ignoring the connective and functional elements such as negation and modals. Consider the following sentences containing *or*: "Bob plays soccer or tennis" and "Bob doesn't play soccer or tennis". Both discuss the same two propositions: A. Bob playing soccer, and B. Bob playing tennis. However, the functional elements combining these two propositions result in different interpretations with respect to the truth of A and B. In "Bob plays soccer or tennis" which contains a disjunction, the interpretation is that Bob plays one or possibly both sports (inclusive disjunction IOR). In "Bob doesn't play soccer or tennis" which contains a negation and a disjunction, the interpretation is that Bob plays neither sports (NOR). For connective interpretations, the annotators first reconstructed the coordinated propositions without the connectives or negation and then decided which propositions were implied to be true/false.

This approach is partly informed by children's development of function and content words. Since children acquire content words earlier than functions words, we assumed that when learning logical connectives, they better understand the content of the propositions being coordinated rather than the functional elements involved in building the coordinated construction. For example, considering the sentences "Bob doesn't play soccer or tennis" without its function words as "Bob, play, soccer, tennis", one can still deduce that there are two relevant propositions: Bob playing soccer, and Bob playing tennis. However, the real challenge is to figure out what is being communicated with respect to the truth of these two propositions. If the learner can figure this out, then the meaning of the functional elements can be reverse engineered. For example, if the learner recognizes that "Bob plays soccer or tennis" communicates that one or both propositions are true (IOR), the learner can associate this interpretation to the unknown element *or*. Similarly, if the learner recognizes the interpretation of "Bob doesn't play soccer or tennis" as neither proposition is true (NOR), they can associate this interpretation to the combination of disjunction and the overt sentential negation. Table \@ref(tab:connectiveInterpretaion) reports the connective interpretations found in our annotations as well as some examples for each interpretation.

```{r logicalConnectives, fig.env="figure", fig.align="center", fig.width=5.5, fig.height=2.5, fig.cap="The truth table for the 16 binary logical connectives. The rows represent the set of situations where zero, one, or both propositions are true. The columns represent the 16 possible connectives and their truth conditions. Green cells represent true situations."}
binary_connectives<- png::readPNG("figs/binary_connective.png")
grid::grid.raster(binary_connectives)
```

|Connective|Meaning|Examples|
|---------|------------------------|-------------------------------------------------|
|AND|Both propositions are true| *"I'm just gonna empty this and then I'll be out of the kitchen." -- "I'll mix them together or I could mix it with carrot, too."*|
|IOR|One or both propositions are true| *"You should use a spoon or a fork." -- "Ask a grownup for some juice or water or soy milk."*|
|XOR|Only one proposition is true| *"Is that a hyena? or a leopard?" -- "We're gonna do things one way or the other."*|
|NOR|Neither proposition is true| *"I wouldn't say boo to one goose or three." -- "She found she lacked talent for hiding in trees, for chirping like crickets, or humming like bees."* |
|IFF|Either both propositions are true or both are false| *"Put them [crayons] up here and you can get down. -- Come over here and I'll show you."* |
|NAB|The first proposition is false, the second is true.| *"There's an Oatio here, or actually, there's a wheat here."* |
Table: (\#tab:connectiveInterpretaion) Annotation classes for connective interpretation

#####Intonation Type
For this category, annotators listened to the utterances and decided whether the intonation contour on the coordination is flat, rise, or rise-fall. Table \@ref(\#tab:intonationTypes) shows the definitions and examples for these intonation types. In order to judge the intonation of the sentence accurately, annotators were asked to construct all three intonation contours for the sentence and see which one is closer to the actual intonation of the utterance. For example, to judge the sentence "do you want orange juice$\uparrow$ or apple juice$\downarrow$?", they reconstructed the sentence with the prototypical flat, rising, and rise-fall intonations and checked to see which intonation is closer to the actual one. It is important to note that while these three intonation contours provide a good general classification, there is a substantial degree of variation as well as a good number of subtypes within each intonation type.

|Intonation Types|Definitions|Examples|
|--------------|------------------------|------------------------------------|
|Flat| Intonation does not show any substantial rise at the end of the sentence. | *"I don't hear any meows or bow-wow-wows."* |
|Rise| There is a substantial intonation rise on each disjunct or generally on both. | *"Do you want some seaweed? or some wheat germ?"*|
|Rise-Fall| There is a substantial rise on the non-final disjunct(s), and a fall on the final disjunct. | *"Is that big Q or little q?" -- "(are) You patting them, petting them, or slapping them?"* |
Table: (\#tab:intonationTypes) Definitions of the intonation types and their examples.

#####Utterance Type
Annotators decided whether an utterance is a declarative, an interrogative, or an imperative. Table \@ref (tab:utteranceTypes) provide the definitions and examples for each utterance type. Occasionally, we found examples with different utterance types for each coordinand. For example, the mother would say "put your backpack on and I'll be right back", where the first cooridnand is an imperative and the second a declarative. Such examples were coded for both utterance types with a dash in-between: imperative-declarative.

|Utterance Types|Definitions|Examples|
|---------------|------------------------------------|------------------------------------|
|Declarative| Typically a statement with a subject-verb-object word order and a flat intonation. | *"It looks a little bit like a drum stick or a mallet."*|
|Interrogative| Typically a question with either subject-auxiliary inversion or a rising terminal intonation.  | *"Is that a dog or a cat?"*|
|Imperative| Typically a directive with an uninflected verb and no subject | *"Have a little more French toast or have some of your juice."*|
Table: (\#tab:utteranceTypes) Definitions of the utterance types and their examples.

#####Syntactic Level 
For this annotation category, annotators decided whether the coordination is at the clausal level or at the sub-clausal level. Clausal level was defined as sentences, clauses, verb phrases, and verbs. Coordination of other categories was coded as sub-clausal. This annotation category was introduced to check the hypothesis that the syntactic category of the coordinands may influence the interpretation of a coordination. The intuition was that a sentence such as "He drank tea or coffee" is less likely to be interpreted as exclusive than "He drank tea or he drink coffee." The clausal vs. sub-clausal distinction was inspired by the fact that in many languages, coordinators that connect sentences and verb phrases are different lexical items than those that connect nominal, adjectival, or prepositional phrases [see @haspelmath2007]. 

|Syntactic Level|Definitions|Examples|
|---------------|---------------------------------|---------------------------------|
|Clausal| The coordinands are sentences, clauses, verb phrases, or verbs. | *"Does he lose his tail sometimes and Pooh helps him and puts it back on?"*|
|Sub-clausal| The coordinands are nouns, adjectives, noun phrases, determiner phrases, or prepositional phrases.  | *"Hollies can be bushes or trees."*|
Table: (\#tab:syntacticLevel) Definitions of the syntactic levels and their examples.

#####Conceptual Consistency
Propositions that are connected by words such as *and* and *or* often stand in complex conceptual relations with each other. For conceptual consistency, annotators decided whether the propositions that make up the coordination can be true at the same time or not. If the two propositions could be true at the same time they were marked as consistent. If the two propositions could not be true at the same time and resulted in a contradiction, they were marked as inconsistent. Our annotators used the following diagnostic to decide the consistency of the disjuncts: Two disjuncts were marked as inconsistent if replacing the word *or* with *and* produced a contradiction. For example, changing "the ball is in my room *or* your room" to "the ball is in my room *and* your room" produces a contradiction because a ball cannot be in two rooms at the same time. 

|Consistency|Definitions|Examples|
|---------------|------------|--------------------------------|
|Consistent| The coordinands can be true at the same time. | *"We could spell some things with a pen or draw some pictures."*|
|Inconsistent| The coordinands cannot be true at the same time.  | *"Do you want warm or cold tomato sauce?"*|
Table: (\#tab:consistencyType) Definitions of the intonation types and their examples.

First, it is important to note here that this criterion is quite strict. In many cases, the possibility of both propositions being true is ruled out based on prior knowledge and expectations of the situation. For example, when asking people whether they would like tea or coffee, it is often assumed and expected that people choose one or the other. However, wanting to drink both tea and coffee is not conceptually inconsistent. It is just very unlikely. Our annotations of consistency are very conservative in that they still consider such unlikely cases as consistent.

Second, there are much more complex relations between coordinated propositions that we have not coded for. For example, coordinated propositions sometimes stand in a causal relation (e.g. the cup fell and broke) or sometimes in a temporal relation (e.g. she brushed her teeth and went to bed), among many more. It is quite feasible to assume that the rich conceptual structure of these propositions help children learn the meaning and use of connectives such as *and*, *or*, *if*, *therefore*, etc. It is possible to develop a more detailed investigation on the relation between propositions and how that affects the acquisition of connective meaning generally. However, in this study we mainly focus on conceptual consistency of the coordinated propositions and how that affects the acquisition of *and* and *or*.

It is also important to note that if the coordinands are inconsistent, this does not necessarily means that the connective interpreation must be exclusive. For example, in a sentence like "you could stay here or go out", the alternatives "staying here" and "going out" are inconsistent. Yet, the overall interpretation of the connective could be conjunctive: you could stay here AND you could go out. The statement communicates that both possibilities hold. This pattern of interaction between possibility modals like *can* and disjunction words like *or* are often discussed under the lable "free-choice inferences" in the semantics and pragmatics literature [@von1968essay; @kamp1973free]. Another example is unconditionals such as "Ready or not, here I come!". The coordinands are contradictions: one is the negation of the other. However, the overall interpretation of the sentences is that in both cases, the speaker is going to come.

#####Communicative Functions
This study constructed a set of categories that captured particular usages or communiative functions of the words *or* and *and*. These communicative functions were created using the first 100 annotation examples and then they were used for the classification of the rest of the examples. Table \@ref(tab:speechActs) shows the definitions and examples of the 10 communicative functions used in this study. The table contains some functions that are general and some that are specific to coordination. For example, directives are a general class while conditionals are more specific to coordinated constructions. It is also important to note that the list is not an unstructured one; we see some communicative functions as subtypes of others. For example, "identifications" and "unconditionals" are sybtypes of "descriptions" while "conditionals" are a subtype of directives. Furthuremore, "repairs" seem parallel to other categories in that any speech at can be repaired. We do not fully explore the details of these functions in this study but such details matter for a general theory of acquisition that makes use of the speaker's communicative intentions as early coarse-grained communicative cues for the acquisition of fine-grained meaning such as function words.

|Answer Type|Definitions|Examples|
|-------------|--------------------------------------------|---------------------------------|
|Descriptions| describing what the world is like or asking about it. The primary goal is to inform the addressee about how things are. |"*It's not in the ditch or the drain pipe.*"|
|Identifications| Identifying the category membership or an attribute of an object. Speaker has uncertainty. A subtype of "Description".| "*Is that a ball or a balloon honey?*"|
|Definitions and Examples| Providing labels for a category or examples for it. Speaker has no uncertainty. Subtype of Description.| *"this is a cup or a mug." -- "berries like blueberry or raspberry"*|
|Preferences| Asking what the addressee wants or would like or stating what the speaker wants or would like |*"do you wanna play pizza or read the book?"* |
|Options| Either asking or listing what one can or is allowed to do. Giving permission, asking for permission, or describing the possibilities. Often the modal "can" is either present or can be inserted. | *"you could have wheat or rice."*|
|Directives| Directing the addressee to act or not act in a particular way. Common patterns include "let's do ...", "Why don't you do ...", or prohibitions such as "Don't ...". The difference with "options" is that the speaker expects the directive to be carried out by the addressee. There is no such expectation for "options".|*"let's go back and play with your ball or we'll read your book."* |
|Clarifications| Something is said or done as a communicative act but the speaker has uncertainty with respect to the form or the content.|*"you mean boba or bubble?"*|
|Repairs| Speaker correcting herself on something she said (self repair) or correcting the addressee (other repair). The second disjunct is what holds and is intended by the speaker. The speaker does not have uncertainty with respect to what actually holds. | *"There's an Oatio here, or actually, there's a wheat here."*|
|Conditionals| Explaining in the second coordinand, what would follow if the first coordinand is (or is not) followed. Subtype of Directive.| *"put that out of your mouth, or I'm gonna put it away."* --  *"Come over here and I'll show you."*|
|Unconditionals| Denying the dependence of something on a set of conditions. Typical format: "whether X or Y, Z". Subtype of Descriptions. | *"Ready or not, here I come!"* (playing hide and seek) |
Table: (\#tab:speechActs) Definitions of the communicative functions and their examples.

#####Answer Type
Whenever a parent's utterance was a polar question, the annotators coded the utterance for the type of response it received from the children. Table \@ref(tab:answerTypes) shows the answer types in this study and their definitions and examples. Utterances that were not polar questions were simply coded as NA for this category. If children responded to polar questions with "yes" or "no", the category was YN and if they repeated with one of the coordinands the category was AB. If children said yes/no and followed it with one of the coordinands, the answer type was determined as YN (yes/no). For example, if a child was asked "Do you want orange juice or apple juice?" and the child responded with "yes, apple juice", our annotators coded the response as YN. The reason is that in almost all cases, if a simple yes/no response is felicitous, then it can also be optionally followed with mentioning a disjunct. However, if yes/no is not a felicitous response, then mentioning one of the alternatives is the only appropriate answer. For example, if someone asks "Do you want to stay here or go out?" a response such as "yes, go out" is infelicitous and a better response is to simply say "go out". Therefore, we count responses with both yes/no and mentioning an alternative as a yes/no response.

|Answer Type|Definitions|Examples|
|--------|------------------------|-----------------------------|
|No Answer|The child provides no answer to the question.| Mother: *"Would you like to eat some applesauce or some carrots?*" Child: *"Guess what Max!*" |
|YN| The child responds with yes or no| Father: *"Can I finish eating one or two more bites of my cereal?"* Child: *"No."* |
|AB| The child responds with one of the disjuncts (alternatives)| Mother: *"Is she a baby elephant or is she a toddler elephant?"* Child: *"It's a baby. She has a tail."*  |
Table: (\#tab:answerTypes) Definitions of answer types and their examples.

#### Inter-annotator Reliability

```{r agreement}
or_agreement <- read_csv("connective_learning/3_providence_annotations/reliability/agreement/or_agreement.csv")
and_agreement <- read_csv("connective_learning/3_providence_annotations/reliability/agreement/and_agreement.csv")
```

To train annotators and confirm their reliaiblity for disjunction examples, two annotators coded the same 240 instances of disjunction. The inter-annotator reliability was calculated over 8 iterations of 30 examples each. After each iteration, annotators met to discuss disagreements and resolve them. They also decided whether the category definitions or annotation criteria needed to be made more precise. Training was completed after three consecutive iterations showed substantial agreement between the annotators (Cohen's $\kappa > 0.7$) for all categories. Figure \@ref(fig:oReliabilityPlot) shows the precentage agreement and the kappa values for each annotation category over the 8 iterations.

```{r oReliabilityPlot, fig.env="figure",fig.align="center", fig.width = 5.5, fig.cap="Inter-annotator agreement for disjunction examples."}
orAgreement <- 
  or_agreement %>%
  gather(annotation_category, value, Utterance.Type:Connective.Interpretation) 

ggplot(orAgreement, aes(x=iteration,y=value, color=annotation_category)) + 
  geom_line() + labs(y="Agreement", x="Iteration") + 
  geom_hline(yintercept=0.7) + 
  facet_grid(statistic~., scales="free_y") +
  theme_few() + 
  theme(text = element_text(size=11, family="Times"))
```

Agreement in three catgories showed substantial improvement after better and more precise deifinitions and annotation criteria were developed: connective interpretation, intonation, and communicative function. First, connective interpretation showed major improvements after annotators developed more precise criteria for selecting the propositions under discussion and separately wrote down the two propositions connected by the connective word. For example, if the original utterance was "do you want milk or juice?", the annotators wrote "you want milk, you want juice" as the two propositions under discussion. This exercise clarified the exact propositions under discussion and sharpened annotator intuitions with respect to the connnective interpretation that is communicated by the utterance. Second, annotators improved agreement on intonation by reconstructing an utterance's intonation for all three intonation categories. For example, the annotator would examine the same sentence "do you want coffee or tea?" with a rise-fall, a rise, and a flat intonation. Then the annotator would listen to the actual utterance and see which one better resembles the actual utterance. This method helped annotators judge the intonation of an utterance more accurately. Finally, agreement on communicative functions improved as the definitions were made more and more precise. For example, the definition of "directives" in Table \@ref(tab:speechActs) explicitly mentions the difference between "directives" and "options". Clarifying the definitions of communicative functions helped improve annotator agreement. 

Inter-annotator reliability for conjunction was calculated similar to disjunction examples. Two different annotators coded 300 utterances of *and*. Inter-annotator reliability was calculated over 10 iterations of 30 examples. Figure \@ref(fig:andReliabilityPlot) shows the precentage agreement between the annotators as well as the kappa values for each iteration.  Despite high percentage agreement between annotators, the kappa values did not pass the set threshold of 0.7 in three consecuitive iterations. This paradoxical result is mainly due to a property of kappa. An imbalance in the prevalence of annotation categories can drastically lower the value of kappa. When one category is extremely common with high agreement while other categories are rare, kappa will be low [@cicchetti1990high;@feinstein1990high]. In almost all annotated categories for conjunction, there was one class that was extremely prevalent. In such cases, it is much more informative to look at the class specific agreement for the prevalent category than the overall agreement measured by Kappa [@cicchetti1990high;@feinstein1990high]. 

```{r andReliabilityPlot, fig.align="center", fig.env="figure", fig.width = 5.5, fig.cap="Inter-annotator agreement for disjunction examples."}
andAgreement <- 
  and_agreement %>%
  gather(annotation_category, value, Utterance.Type:Connective.Interpretation) 

ggplot(andAgreement, aes(x=iteration,y=value, color=annotation_category)) + 
  geom_line() + labs(y="Agreement") + 
  geom_hline(yintercept=0.7) + 
  scale_x_continuous(breaks = seq(1,10)) +
  facet_grid(statistic~., scales="free_y") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

Table \@ref(tab:andAgreeStats) lists the dominant classes as well as their prevalence, the values of class specific agreement index, and category agreement index (Kappa). Class specific agreement index is defined as $2n_{ii}/n_{i.}+n_{.i}$, where $i$ represents the class's row/column number in the category's confusion matrix, $n$ the number of annotations in a cell, and the dot ranges over all the row/column numbers [@fleiss2013statistical, page 600; @ubersax2009]. The class specific agreement indeces are very high for all the most prevalent classes showing that the annotators had very high agreement on these class, even though the general agreement index (Kappa) was often low. The most extreme case is the category "consistency" where almost all instances were annotated as "consistent" with perfect class specific agreement but low overall Kappa. In the case of utterance type and syntactic level where the distribution of instances across classes was more even, the general index of agreement Kappa is also high. In general, examples of conjunction showed little variablility across annotation categories and mostly fell into one class within each category. Annotators had very high agreement for these dominant classes.

```{r andAgreeStats}
and_specific_Kappa <- read_csv("connective_learning/3_providence_annotations/reliability/agreement/and_specific_Kappa.csv")

kable(and_specific_Kappa, digits=2, caption="Most prevalent annotation class in each annotation category with the values of class agreement indeces and category agreement indeces (Kappa).", col.names = c("Annotation Category", "Class", "Prevalence", "Class Agreement Index", "Kappa"))
```

### Results

```{r interpretations}
interpretation_prop <- 
  connective_annotations %>%
  group_by(connective_meaning) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  mutate(total = sum(counts), est = counts/total)

connective_confint <-
  interpretation_prop$counts %>% 
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame()

interpretation_prop %<>% full_join(connective_confint, by="est")

#Order interpretation as AND > XOR > IOR > ...
interpretation_prop$connective_meaning %<>% fct_relevel("AND", "XOR")


#  connective_annotations %>%
#  group_by(connective_meaning, annotation) %>%
#  summarise(counts= n()) %>%
#    ggplot(aes(x=connective_meaning, y=counts)) +
#    geom_bar(stat="identity", width=0.2) +
#    facet_grid(.~annotation) + 
#    theme_few()
```

First, I show the results for the study's dependent measure^[All the confidence intervals shown in the plots for this section are simultaneous multinomial confidence intervals computed using the @sison1995simultaneous's method]. Figure (\@ref(fig:interpretationPlot)) shows the distribution of the connective interpretations in the study. The most common interpretation was the conjunctive interpretation AND (`r round(interpretation_prop$est[1],2)`) followed by the exclusive XOR (`r round(interpretation_prop$est[6],2)`). Figure (\@ref(fig:connectivePlot)) shows the distribution of connective interpretations by the connective words *and* and *or*. For *and*, the most frequent interpretation (in fact almost the only interpretation), is conjunction AND. For *or*, the most frequent interpretation is exclusive disjunction XOR. These results replicate the findings of @morris2008logically.

```{r interpretationPlot, fig.env="figure", fig.align="center", fig.width=3, fig.height=2.5, fig.cap="The proportion of different interpretations of the connectives and/or in child-directed speech"}
interpretation_prop %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + 
  geom_bar(stat = "identity", width=0.7) +
  geom_linerange(aes(ymax = upr.ci, ymin = lwr.ci)) + 
  guides(fill=FALSE) +
  labs(x="", y="Proportion") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

```{r connectivePlot, fig.align="center", fig.env="figure", fig.width=5, fig.height=2.5, fig.cap="Interpretations of and/or in child-directed speech"}
connective_prop <- 
  connective_annotations %>%
  group_by(connective_meaning, annotation) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(annotation) %>%
  mutate(total = sum(counts), est = counts/total)

# calculating the multinomial confidence intervals
connective_confint_AND <-
  connective_prop %>%
  filter(annotation =="AND")
connective_confint_AND <-
  connective_confint_AND$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(connective_confint_AND, by="est")
connective_confint_OR <-
  connective_prop %>%
  filter(annotation =="OR")
connective_confint_OR <-
  connective_confint_OR$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(connective_confint_OR, by="est")

connective_prop <-
  bind_rows(connective_confint_AND, connective_confint_OR)

connective_prop %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + 
  geom_bar(stat = "identity", width=0.7) +
  geom_linerange(aes(ymax = upr.ci, ymin = lwr.ci)) + 
  facet_grid(.~annotation) +
  guides(fill=FALSE) +
  labs(y="Proportion", x="") +
  theme_few() +
  theme(text = element_text(size=11, family = "Times"))
```

Based on these results, Morris argued that given the high frequency of conjunction and exclusive disjunction in the input, children should map the meanings of *and* and *or* as conjunction and exclusive disjunction, at least initially, between the ages of 2 and 5. Children learn the inclusive interpretation of disjunction later as they encounter more inclusive (logical) uses of *or*. However, comprehension tasks show that children between 3 and 5 tend to interpret *or* as inclusive disjunction rather than exclusive disjunction in a variety of declarative sentences [@chierchia2001acquisition; @notley2012children; @gualmini2000; @gualmini2000inclusion, among others]. How can children learn the inclusive semantics of *or* if they rarely hear it? The remainder of this section explore the role of cues in child directed speech that could help children successfully interpret a disjunction as inclusive or exclusive.

```{r utteranceTypes}
utteranceType_prop <- 
  disjunctions %>%
  filter(utterance_type == "declarative" | utterance_type == "imperative" | utterance_type == "interrogative") %>%
  group_by(connective_meaning, utterance_type, annotation) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(utterance_type, annotation) %>%
  mutate(total = sum(counts), est = counts/total)

#confidence intervals
utteranceType_confint_dec <-
  utteranceType_prop %>%
  filter(utterance_type =="declarative")
utteranceType_confint_dec <-
  utteranceType_confint_dec$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(utteranceType_confint_dec, by="est")

utteranceType_confint_int <-
  utteranceType_prop %>%
  filter(utterance_type =="interrogative")
utteranceType_confint_int <-
  utteranceType_confint_int$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(utteranceType_confint_int, by="est")

utteranceType_confint_imp <-
  utteranceType_prop %>%
  filter(utterance_type =="imperative")
utteranceType_confint_imp <-
  utteranceType_confint_imp$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(utteranceType_confint_imp, by="est") %>% unique()

utteranceType_confints <-
  bind_rows(utteranceType_confint_dec, utteranceType_confint_int, utteranceType_confint_imp)
```

```{r utterancetypePlot, fig.env="figure", fig.align="center", fig.width=5.5,fig.height=2.5, fig.cap="Connective interpretations in different sentence types."}
utteranceType_confints %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + geom_bar(stat = "identity", width=0.7) +
  facet_grid(.~utterance_type) +
  geom_linerange(aes(ymin=lwr.ci,ymax=upr.ci)) +
  guides(fill=FALSE) +
  labs(x="", y="proportion") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

I will first look at the effect of utterance type on the interpretation of *or*. Figure \@ref(fig:utterancetypePlot) shows the distribution of connective interpretations in declarative, interrogative, and imperative sentences. Interrogatives are more likely to be interpreted as exclusive disjunction XOR, imperatives are more likely to be interpreted as inclusive or exclusive, and declaratives are most likely exclusive XOR or conjunctive AND. It is important to note here that the inclusive interpretations of imperatives are largely due to invitations to action such as "Have some food or drink!". Such invitational imperatives seem to convey inclusivity IOR systematically. They are often used to give addressee full permission with respect to both alternatives and it seems quite odd to use them to imply exclusivity ("have some food or drink but not both!"), and they do not seem to be conjunctive either ("have some food and have some drink"). They rather imply that the addressee is invited to have food, drink, or both.

```{r intonation}
intonation_prop <- 
  disjunctions %>%
  group_by(connective_meaning, intonation) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(intonation) %>%
  mutate(total = sum(counts), est = counts/total)

#confidence intervals
intonation_confint_flat <-
  intonation_prop %>%
  filter(intonation =="flat")
intonation_confint_flat <-
  intonation_confint_flat$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(intonation_confint_flat, by="est")

intonation_confint_risefall <-
  intonation_prop %>%
  filter(intonation =="rise-fall")
intonation_confint_risefall <-
  intonation_confint_risefall$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(intonation_confint_risefall, by="est")

intonation_confint_rise <-
  intonation_prop %>%
  filter(intonation =="rise")
intonation_confint_rise <-
  intonation_confint_rise$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(intonation_confint_rise, by="est")

intonation_confints <-
  bind_rows(intonation_confint_flat, intonation_confint_risefall, intonation_confint_rise)
```

```{r intonationPlot, fig.env="figure", fig.align="center", fig.width=6, fig.height=2.5, fig.cap="The distribution of connective interpretations in flat, rising, and rise-fall intonation contours."}
intonation_confints %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + 
  geom_bar(stat = "identity", width=0.7) +
  geom_linerange(aes(ymax = upr.ci, ymin = lwr.ci)) + 
  facet_grid(.~intonation) +
  guides(fill=FALSE) +
  labs(x="", y="") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

Figure (\@ref(fig:intonationPlot)) shows the proportions of different connective interpretations in the three intonation contours: flat, rise, and rise-fall. A disjunction with a rise-fall intonation is most likely interpreted as exclusive XOR. A disjunction is more likely to be interpreted as inclusive IOR if the intonation is rising. And a disjunction with a flat intonation may be interpreted as exclusive XOR, conjunctive AND, or inclusive IOR. These results are consistent with @pruitt2013interpretation's experimental findings that a rise-fall intonation contour on a disjunction results in an exclusive interpretation. Since rise-fall and rising intonation contours are almost always on interrogatives, Figures \@ref(fig:utterancetypePlot) and \@ref(fig:intonationPlot), suggest that the rise-fall and rising intonation types distinguish exclusive and inclusive interpretations of disjunction in interrogatives. Furthermore, given a flat intonation type, an imperative may be more likely to be inclusive.

```{r consistency}
consistency_prop <- 
  disjunctions %>%
  group_by(connective_meaning, consistency,annotation) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(consistency,annotation) %>%
  mutate(total = sum(counts), est = counts/total)

#confidence intervals
consistency_confint_con <-
  consistency_prop %>%
  filter(consistency =="consistent")
consistency_confint_con <-
  consistency_confint_con$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistency_confint_con, by="est")

consistency_confint_inc <-
  consistency_prop %>%
  filter(consistency =="inconsistent")
consistency_confint_inc <-
  consistency_confint_inc$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistency_confint_inc, by="est") %>% unique()

consistency_confint <-
  bind_rows(consistency_confint_con, consistency_confint_inc)
```

```{r consistencyPlot, fig.env="figure", fig.width=4.5, fig.height=2.5, fig.align="center", fig.cap="Connective interpretations in disjunctions with consistent and inconsistent disjuncts."}
consistency_confint %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + 
  geom_bar(stat = "identity", width=0.7) +
  geom_linerange(aes(ymax = upr.ci, ymin = lwr.ci)) + 
  facet_grid(.~consistency) +
  guides(fill=FALSE) +
  labs(x="", y="proportion")+
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

Figure \@ref(fig:consistencyPlot) shows the proportions of connective interpretations in disjunctions with consistent vs. inconsistent disjuncts. When the disjuncts were consistent, the interpretation could be exclusive XOR, inclusive IOR, or conjunctive AND. When the disjuncts were inconsistent, however, a disjunction almost always received an exclusive XOR interpretation. These results suggest that the exclusive interpretation of a disjunction often stems from the inconsistent or contradictory nature of the disjuncts themselves and not necessarily the connective word *or*. It should be noted here that in all *and*-examples, the disjuncts were consistent. This is not surprising given that inconsistent meanings with *and* result in a contradiction. The only exception to this was one example where the mother was mentioning two words as antonyms: "short and tall". This example is quite different from the normal utterances given that it is meta-linguistic and list words rather than asserting the content of the words.

```{r consistencyByIntonation}
consistonation_prop <- 
  disjunctions %>%
  group_by(connective_meaning, consistency, intonation) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(intonation, consistency) %>%
  mutate(total = sum(counts), est = counts/total)

#confidence intervals
consistonation_confint_conflat <-
  consistonation_prop %>%
  filter(consistency =="consistent", intonation=="flat")
consistonation_confint_conflat <-
  consistonation_confint_conflat$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistonation_confint_conflat, by="est")

consistonation_confint_incflat <-
  consistonation_prop %>%
  filter(consistency =="inconsistent", intonation=="flat")
consistonation_confint_incflat <-
  consistonation_confint_incflat$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistonation_confint_incflat, by="est")

consistonation_confint_conrise <-
  consistonation_prop %>%
  filter(consistency =="consistent", intonation=="rise")
consistonation_confint_conrise <-
  consistonation_confint_conrise$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistonation_confint_conrise, by="est")

consistonation_confint_incrise <-
  consistonation_prop %>%
  filter(consistency =="inconsistent", intonation=="rise")
consistonation_confint_incrise <-
  consistonation_confint_incrise$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistonation_confint_incrise, by="est")

consistonation_confint_confall <-
  consistonation_prop %>%
  filter(consistency =="consistent", intonation=="rise-fall")
consistonation_confint_confall <-
  consistonation_confint_confall$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistonation_confint_confall, by="est")

consistonation_confint_incfall <-
  consistonation_prop %>%
  filter(consistency =="inconsistent", intonation=="rise-fall")
consistonation_confint_incfall <-
  consistonation_confint_incfall$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(consistonation_confint_incfall, by="est")

consistonation_confint <-
  bind_rows(consistonation_confint_conflat, consistonation_confint_incflat,
            consistonation_confint_conrise, consistonation_confint_incrise,
            consistonation_confint_confall, consistonation_confint_incfall)
```

```{r consistencyByintonationPlot, fig.env="figure", fig.align="center", fig.width=6, fig.height=3, fig.cap="Interpretations of and/or in the three intonation contours flat, rising, and rise-fall."}
consistonation_confint %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + 
  geom_bar(stat="identity", width=0.7) +
  geom_linerange(aes(ymax = upr.ci, ymin = lwr.ci)) + 
  facet_grid(consistency~intonation, scales="free_y") +
  guides(fill=FALSE) +
  labs(x="", y="proportion") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

In  Figure \@ref(fig:consistencyByintonationPlot), I break down connective interpretations by both intonation and consistency. The results show that disjunctions are interpreted as exclusive XOR when they carry either inconsistent disjuncts or a rise-fall intonation. If the disjunction has consistent disjuncts and carries a rising intonation, it is most likely interpreted as inclusive IOR. Disjunctions with consistent disjuncts and a flat intonation contour could have conjunctive AND, inclusive IOR, or exclusive XOR interpretations.

```{r syntax}
syntax_prop <- 
  disjunctions %>%
  group_by(connective_meaning, syn_level) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(syn_level) %>%
  mutate(total = sum(counts), est = counts/total)

#confidence intervals
syntax_confint_sen <-
  syntax_prop %>%
  filter(syn_level =="SEN")
syntax_confint_sen <-
  syntax_confint_sen$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(syntax_confint_sen, by="est")

syntax_confint_nom <-
  syntax_prop %>%
  filter(syn_level =="NOM")
syntax_confint_nom <-
  syntax_confint_nom$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(syntax_confint_nom, by="est")

syntax_confint <-
  bind_rows(syntax_confint_sen, syntax_confint_nom)
```

```{r syntaxPlot, fig.env="figure", fig.width=5, fig.height=2.5, fig.align="center", fig.cap="Connective interpretations in clausal and sub-clausal disjunctions."}
syntax_confint$syn_level <- fct_recode(syntax_confint$syn_level, clausal="SEN", `sub-clausal`="NOM")

syntax_confint %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + 
  geom_bar(stat = "identity", width=0.7) +
  geom_linerange(aes(ymax = upr.ci, ymin = lwr.ci)) + 
  facet_grid(.~syn_level) +
  guides(fill=FALSE) +
  labs(x="", y="proportion") +
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

Figure \@ref(fig:syntaxPlot) shows connective interpretations by the syntactic level of the disjunction. As a reminder, we annotated disjunctions with clausal and verbal disjuncts as "clausal" and those with other syntactic categories as sub-clausal. The goal was to assess the role of syntax in the interpretation of disjunction. The results suggest a small effect of clausal level disjuncts. Disjunctions are more likely to be interpreted as exclusive when their disjuncts are clauses or verbs rather than nominals, adjectives, or prepositions (all sub-clausal units). 

```{r speech_acts}
speechAct_prop <- 
  disjunctions %>%
  group_by(connective_meaning, speech_act) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(speech_act) %>%
  mutate(total = sum(counts), est = counts/total)

# calculating the multinomial confidence intervals
descriptions_confint <-
  speechAct_prop %>%
  filter(speech_act =="description")
descriptions_confint <-
  descriptions_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(descriptions_confint, by="est")

clarifications_confint <-
  speechAct_prop %>%
  filter(speech_act =="clarification")
clarifications_confint <-
  clarifications_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(clarifications_confint, by="est")

conditional_confint <-
  speechAct_prop %>%
  filter(speech_act =="conditional")
conditional_confint <-
  conditional_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(conditional_confint, by="est")

defex_confint <-
  speechAct_prop %>%
  filter(speech_act =="defex")
defex_confint <-
  defex_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(defex_confint, by="est")

directive_confint <-
  speechAct_prop %>%
  filter(speech_act =="directive")
directive_confint <-
  directive_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(directive_confint, by="est")

identification_confint <-
  speechAct_prop %>%
  filter(speech_act =="identification")
identification_confint <-
  identification_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(identification_confint, by="est")

options_confint <-
  speechAct_prop %>%
  filter(speech_act =="options")
options_confint <-
  options_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(options_confint, by="est")

preference_confint <-
  speechAct_prop %>%
  filter(speech_act =="preference")
preference_confint <-
  preference_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(preference_confint, by="est") %>% unique()

repair_confint <-
  speechAct_prop %>%
  filter(speech_act =="repair")
repair_confint <-
  repair_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(repair_confint, by="est")

unconditional_confint <-
  speechAct_prop %>%
  filter(speech_act =="unconditional")
unconditional_confint <-
  unconditional_confint$counts %>%
  MultinomCI(conf.level = 0.95, method = "sisonglaz") %>% data.frame() %>%
  full_join(unconditional_confint, by="est")

speechActs <- bind_rows(descriptions_confint, options_confint, unconditional_confint, repair_confint, preference_confint, identification_confint, directive_confint, defex_confint, conditional_confint, clarifications_confint)

speechActs$speech_act <- fct_relevel(speechActs$speech_act, "preference", "description", "clarification", "identification", "conditional", "directive", "options", "repair", "defex", "unconditional")
```

```{r speechActPlot, fig.env="figure", fig.align="center", fig.width=6, fig.height=5, fig.cap="Connective interpretations in different communicative functions."}
speechActs %>%
  ggplot(aes(x= connective_meaning, y=est, fill=connective_meaning)) + 
  geom_bar(stat = "identity", width = 0.5) +
  geom_linerange(aes(ymax = upr.ci, ymin = lwr.ci)) + 
  facet_wrap(~speech_act) +
  guides(fill=FALSE) +
  labs(x="", y="proportions") +
  theme_few() +
  theme(text = element_text(size=10, family = "Times"))
```

For the last independent variable in our study, I take a look at how disjunction interpretations are affected by the communicative function of the utterance they appear in. Figure \@ref(fig:speechActPlot) shows the proportions of connective interpretations in the 10 different communicative functions of this study. The results show that certain functions increase the likelihood of some connective interpretations. An exclusive XOR interpretation of *or* is common in acts of clarification, identification, stating/asking preferences, stating/asking about a description, or making a conditional statements. These results are consistent with expectations on the communicative intentions of that these utterances carry. In clarifications, the speaker needs to know which of two alternatives the other party meant. Similarly in identifications, speaker needs to know which category does a referent belongs to. In preferences, parents seek to know which of two alternatives the child wants. Even though descriptions could be either inclusive or exclusive, in the current sample most descriptions were questions about the state of affairs and required the child to provide one of the alternatives as the answer. In conditionals such as "come here or you are grounded", the point of the threat is that only one disjunct can be true: either "you come and you are not grounded" or "you don't come and you are grounded". This is similar to an exclusive interpretation of *or*. 

Repairs often received an exclusive XOR or a second disjunct true NAB interpretation. This is expected given that in repairs the speaker intends to say that the first disjunct is incorrect or inaccurate. Unconditionals and definitions/examples always had a conjunctive AND interpretation. Again, this is to be expected. In such cases the speaker intends to communicate that all options apply. If the mother says that cats are animals like lions or tigers, she intends to say that both lions and tigers are cats and not one or the other. Interestingly, in some cases (not all), *or* is replaceable by and: cats are animals like lions and tigers. In unconditionals, the speaker communicates that in both alternatives, a certain proposition holds. For example, if the mother says "ready or not, here I come!", she communicates that "I come" is true in both "you are ready" and "you are not ready".

Options were often interpreted either as conjunctive AND or inclusive IOR. The category options contained examples of free-choice inferences such as "you could drink orange juice or apple juice". This study found free-choice examples much more common than the current literature on the acquisition of disjunction suggests. Finally, directives received either an IOR or XOR interpretation. It is important to note here that the most common communcative function in the data were preferences and descriptions. Other communicative functions such as unconditionals or options were fairly rare. Despite their infrequent appearance, these constructions must be learned by children at some point, since almost all adults know how to interpret them. It is clear from the investigation here that any learning account for function word meaning/interpretation also needs to account for how such infrequent constructions are learned. 

Finally, I take a look at how children responded to the questions containing *and* and *or*. As a reminder, we annotated every polar question such as "do you want cereal or toast?" for the type of answer children provided. An answer such as "yes/no" is annotated as YN and an answer with alternatives such as "cereal/toast" is annotated as "AB". Figure (\@ref(fig:answerPlot)) shows the monthly proportions of these answer types between 1 and 3 years of age. Initially, children provide noy answer to polar questions, but by the age 3, the majority of such questions receive a yes/no (YN) or alternative (AB) answer.

```{r answerPlot, fig.env="figure", fig.width=4, fig.height=2, fig.align="center", fig.cap="The proportions of children's answer types to polar questions containing the connectives and/or at different ages (in months)."}
answer_prop <- 
  disjunctions %>%
  filter(answer!="N", answer!="S") %>%
  group_by(answer, age_months) %>%
  summarise(counts= n()) %>%
  na.omit() %>%
  group_by(age_months) %>%
  mutate(total = sum(counts), proportion = counts/total)

answer_prop %>%
  ggplot(aes(x= age_months, y=proportion, fill=answer)) + 
  geom_bar(stat = "identity", width=0.7) +
#  geom_linerange(aes(ymax = cih, ymin = cil)) + 
#  facet_grid(.~annotation) +
#  guides(fill=FALSE) +
#  scale_x_continuous(lim=c(13,39)) +
  scale_fill_manual(values=c("gray", "springgreen3", "springgreen4")) +
  labs(x="age (months)", y = "proportion")+
  theme_few() +
  theme(text = element_text(size=11, family="Times"))
```

These two answer types are not necessarily appropriate for all types of polar questions that contain *and* and *or*. For example, a polar question with *and* such as "do you want cereal and juice?" typically receives an answer that contains "yes/no" rather than only one of the alternatives such as "cereal/juice". Alternative answers are typically provided to alternative questions with the rise-fall intonation. For example, a questions such as "do you want to stay here or go out?" receives an answer such as "stay here" and not "yes". However, a polar disjunctive question such as "any tea or coffee?" typically contains a "yes"/"no" rather than only one of the alternatives like "tea/coffee", even though both answers are possible. Based on such typical responses patterns, we can definite appropriate answers as alternative (AB) answers to alternative questions (with "or" and rise-fall intonation) and yes/no answers (YN) to the other questions. Of course this classification is too strict and misses some nuanced cases but it provides a rough estimate of appropriate answers offered to parents' questions. Figure (\@ref(fig:answerHitsPlot)) shows the monthly proportion of children's "appropriate" answers between the ages of 1 and 3. The results show that even with a strict measure, children show an increase in the proportion of their appropriate responses to questions containing *and* and *or* between 20 to 30 months of age (roughly 2 and 3 years of age). This increase in appropriate responses is consistent with the results in the previous section that suggested children's u understanding of *and* and *or* develops between 2 and 4 years of age.

```{r answerHitsPlot, fig.env="figure", fig.width=4, fig.height=2, fig.align="center", fig.cap="Proportion of children's appropriate resonses" }
disjunctions$appropriate <- "0"

disjunctions$appropriate[disjunctions$answer == "YN" & 
                                        disjunctions$utterance_type == "interrogative" &
                                        disjunctions$intonation == "rise"
                                       ] <- "1"

# In case you would like to count an alternative answer to a rising question as correct as well. The results are similar
#disjunctions$appropriate[disjunctions$answer == "AB" & 
#                                        disjunctions$utterance_type == "interrogative" &
#                                        disjunctions$intonation == "rise"
#                                       ] <- "1"

disjunctions$appropriate[disjunctions$answer == "AB" & 
                                        disjunctions$utterance_type == "interrogative" &
                                        disjunctions$intonation == "rise-fall"
                                       ] <- "1"

answer_prop <- 
  disjunctions %>%
  filter(answer!="N", answer!="S") %>%
  group_by(appropriate, age_months) %>%
  summarise(counts= n()) %>%
  group_by(age_months) %>%
  mutate(total = sum(counts), proportion = counts/total)

answer_prop %>%
  ggplot(aes(x= age_months, y=proportion, fill=appropriate)) + 
  geom_bar(stat = "identity", width=0.7) +
#  geom_linerange(aes(ymax = cih, ymin = cil)) + 
#  facet_grid(.~annotation) +
  scale_x_continuous(lim=c(12,38)) +
  #  guides(fill=FALSE) +
  scale_fill_manual(values=c("gray","navy")) +
  theme_few() +
  labs(x="age (months)", y = "proportion")+
  theme(text = element_text(size=11, family = "Times"))
```

```{r eval=FALSE}

disjunctions$connective_meaning <- relevel(disjunctions$connective_meaning, ref = "NAB")

library(brms)
or_model <- brm(connective_meaning ~ speech_act + consistency + utterance_type + intonation + syn_level + (1|id), family=categorical,  control = list(adapt_delta = 0.9), prior=c(set_prior ("normal (0, 10)")), data=disjunctions)

summary(or_model)
coef (or_model)

or_model2 <- brm(connective_meaning ~ speech_act*consistency*utterance_type*intonation*syn_level + (1|id), control = list(adapt_delta = 0.9), prior=c(set_prior ("normal (0, 10)")), family=categorical,  data=disjunctions)

summary(or_model2)
```

### Discussion

The goal of this study was to discover the potential cues in child-directed speech that could help children learn the interpretations of *and* and *or*. The study presented 1000 examples of *and* and *or* in child-directed speech, annotated for their truth-conditional interpretation, as well as five candidate cues to their interpretation: (1) Utterance Type; (2) Intonation Type; (3) Syntactic Level; (4) Conceptual Consistency; (5) Communicative Function. Like @morris2008logically, this study found that the most common interpretations of *and* and *or* are conjunction AND and exclusive disjunction XOR. When the data were broken down by the connectives, *and* was almost always interpreted as a conjunction while *or* received three main interpretations: exclusive disjunction XOR, inclusive disjunction IOR, and conjunction AND. 

While the most frequent interpretation of *or* was exclusive XOR overall followed by IOR, the distribution of disjunction interpretations shifted when they were broken down by the cues identified here. A disjunction was most likely exclusive if the alternatives were inconsistent (i.e. contradictory). A disjunction was most likely exclusive if it appeared in a question. Within questions, a disjunction was most likely exclusive if the intonation was rise-fall. If the intonation was rising, the question was interpreted as inclusive. The syntactic category of the disjuncts could also provide information for interpretation. If the disjuncts were clausal then it was more likely for the disjunction to be interpreted as exclusive, even though this effect was small. Finally, specific communicative functions required specific interpretations of the connective. *or* often received a conjunctive interpretation in the following contexts: defining terms and providing examples, enumerating options, and in unconditional constructions. These results suggest that in order to successfully learn to interpret a disjunction, children need to pay attention to a wide variety of formal and conceptual factors.

In order to have a rough measure of children's comprehension of disjunction, this study also investigated the types of answers they provided to polar questions with disjunction. Between the ages of 20 and 30 months (roughly 1;6 to 2;6 years), children start to answer *or* questions appropriately. They would respond to a yes/no question such as "do you want any apple juice or orange juice?" with a yes/no answer. They would also respond to an alternative question, as in"do you want to play inside or outside?", with one of the alternates, e.g. "inside". This finding is consistent with the first corpus study presented in this chapter, which reported that the age range between 1;6 and 4 is the age range in which children develop their understanding of *and* and *or*.

Due to the exploratory nature of this study, it is important to replicate and extend these results and conclusions in future studies. For example, future studies could use an automated procedure for the annotation of categories such as utterance type, syntactic level, and intonation. An automated procedure would also allow for the annotation of larger samples and so could result in more reliable estimates for the role of various factors in learning the meanings of function words. For categories such as communicative function and connective interpretation, future studies could use a larger number of independent annotators to increase the speed and number of annotations. However, several results reported in this study are independently supported by previous research. @morris2008logically found similar results with respect to the overall interpretation of disjunction in child-directed speech: *and* is most often interpreted as conjunction and *or* as exclusive disjunction. In an experimental study, @pruitt2013interpretation have shown that a rise-fall intonation results in an exclusive interpretation. @geurts2006exclusive has argued that a portion of exclusivity inferences are simply due to the fact that the alternatives are mutually exclusive and inconsistent. 

Finally, the list of cues investigated here is in no way exhaustive. There are at least two additional, possibly important factors/cues that I set aside due to the difficulties that their annotation would have introduced. First, an exclusive interpretation is sometimes the result of a presupposition that only one alternative can hold or would matter for the purposes of the conversation. For example, in the context of a class activity where students pair up, a statement such as "Lisa worked with Ann or John" is interpreted as exclusive simply because the context already presupposes that only one disjunct can be true. Second, some exclusivity inferences are due to the speaker's choice of connective, namely using *or* rather than *and*. @grice1989studies famously argued that in some cases, we interpret a disjunction like *A or B* as A or B, but not both because we reason that if the speaker intended to communicate that both alternatives hold, s/he would have said *A and B*. This study did not annotate for such cases. However, the study's results suggest that such cases of exclusive interpretations are less frequent in child-directed speech that the ones already annotated for. Investigating how often such cases of pragmatic exclusion appear in child-directed speech can help us better understand the role of input in children's acquisition of scalar implicatures.

## Conclusion

This chapter presented two studies on the frequency and usage of *and* and *or*. The first study looked at the frequencies of these two words in a large collection of corpora for children between the ages of 1 and 6 years. It showed that children start producing *and* between 12 to 18 months of age and rapidly increase their productions until they reach the adult rate at 30 months. The production of *or* starts a little later, between 18-30 months, and rapidly reaches a steady rate at 48 months. This rate is below the adult rate for *or* in child directed speech. The results suggest we can expect an early understanding of disjunction between the ages of 18 and 30 months.

The second study looked at the interpretations of *and* and *or* in a sample of child directed speech, as well as the cues that accompany these instances. The study confirmed preivous finding that exclusive disjunciton is the most common interpretation of *or* in child directed speech. However, the also found that exclusive interpretations are reliably cued by intonation and the consistency of the disjuncts. In the absence of these cues, a disjunction is most likely inclusive or conjunctive. In the next chapter, I provide a computational model that uses the cues discussed here to learn the interpretation of utterances containing *and* and *or*. 


<!--
## General Discussion

This chapter presented two studies. The first study investiageted *and* and *or*'s frequency in the speech of parents and children. It found that *and* is 10 times more frequent than *or* in parents' speech. It also found that children reach the relative frequency of their praents in producing *and* but not *or*. children start to produce *and* earlier than *or*.  It also found that children reach the parent level of production earlier for *and*. It also found that 

The second study looked at the frequency of interpretations that *and* and *or* have in a small sample of child-directed speech. It supported previous findings that overall, the most frequent interpretations for *and* and *or* are conjunction and exclusive disjunction. However, the study also showed that exclusive interpretations of disjunciton are accompanied by salient cues such 

The second puzzle that this paper addressed was the problem of learning an inclusive semantics for *or* from the majority exclusive instances in children's input. Previous studies showed that most *or* examples children hear receive an exclusive interpretation, yet in comprehension tasks they interpret *or* as inclusive. We suggest that other independent cues in the input may allow children to solve this problem. In Study 2, we replicated the pattern that most interpretations of *or* were exclusive. But most of these exclusive interpretations were either constituted of two conceptually inconsistent disjuncts or accompanied by a distinctive rise-fall intonation. Disjunctions that did not show either of these two cues were typically inclusive. If children track these cues, then they could tease apart the semantic contribution of *or* from the interpretive contribution of the cues that accompany it. 


Form-meaning mapping in child language acquisition is often construed as the task of associating a novel, isolated form such as *gavagai* to a well-delimited concept such as rabbit. The case of disjunction is more complicated. *or* cannot be isolated from either the conceptual properties of the words and phrases that it combines with or the prosodic contour of the utterance as a whole. Learning *or* and other function words requires a fuller consideration of the formal and conceptual contexts in which they occur; our models must take these into account. 
